var gdjs;(function(c){let F;(function(R){let M;(function(a){const y=new c.Logger("Tween"),p=e=>t=>e.setNumber(t),x=e=>{},S=e=>{},w=e=>([t,n])=>{e.setCameraX(t),e.setCameraY(n)},C=e=>t=>e.setCameraRotation(t),L=e=>t=>e.setCameraZoom(t),v=(e,t)=>n=>{e&&e.updateDoubleParameter(t,n)},P=(e,t)=>([n,r,s])=>{if(e){const o=c.evtTools.tween.hslToRgb(n,r,s);e.updateColorParameter(t,c.rgbToHexNumber(o[0],o[1],o[2]))}};a.tweenSetterFactory=e=>t=>{const n=t.type,r=t.layerName,s=t.variablePath,o=t.effectName,i=t.propertyName;if(n==="variable"&&s){const l=e.getVariables().getVariableFromPath(s);return l?p(l):()=>{}}if(n==="cameraZoom"&&r!==void 0){const l=e.getLayer(r);return L(l)}if(n==="cameraRotation"&&r!==void 0){const l=e.getLayer(r);return C(l)}if(n==="cameraPosition"&&r!==void 0){const l=e.getLayer(r);return w(l)}if(n==="colorEffectProperty"&&r!==void 0&&o&&i){const g=e.getLayer(r).getRendererEffects()[o];return g||y.error(`The layer "${r}" doesn't have any effect called "${o}"`),P(g,i)}if(n==="numberEffectProperty"&&r!==void 0&&o&&i){const g=e.getLayer(r).getRendererEffects()[o];return g||y.error(`The layer "${r}" doesn't have any effect called "${o}"`),v(g,i)}return n==="layoutValue"?x:n==="layerValue"?S:()=>{}},a.getTweensMap=e=>e._tweens||(e._tweens=new c.evtTools.tween.TweenManager),c.registerRuntimeScenePreEventsCallback(function(e){c.evtTools.tween.getTweensMap(e).step()}),c.registerRuntimeSceneGetSyncDataCallback(function(e,t,n){if(!n.syncTweens)return;const r=c.evtTools.tween.getTweensMap(e).getNetworkSyncData();t.tween=r}),c.registerRuntimeSceneUpdateFromSyncDataCallback(function(e,t,n){!t.tween||c.evtTools.tween.getTweensMap(e).updateFromNetworkSyncData(t.tween,r=>r.layerName!==void 0?e.getLayer(r.layerName):e,r=>c.evtTools.tween.tweenSetterFactory(e)(r),()=>null)}),a.sceneTweenExists=(e,t)=>a.getTweensMap(e).exists(t),a.sceneTweenIsPlaying=(e,t)=>a.getTweensMap(e).isPlaying(t),a.sceneTweenHasFinished=(e,t)=>a.getTweensMap(e).hasFinished(t),a.resumeSceneTween=(e,t)=>{a.getTweensMap(e).resumeTween(t)},a.pauseSceneTween=(e,t)=>{a.getTweensMap(e).pauseTween(t)},a.stopSceneTween=(e,t,n)=>{a.getTweensMap(e).stopTween(t,n)},a.removeSceneTween=(e,t)=>{a.getTweensMap(e).removeTween(t)},a.getProgress=(e,t)=>a.getTweensMap(e).getProgress(t),a.getValue=(e,t)=>a.getTweensMap(e).getValue(t);const m=c.evtTools.common.lerp,b=c.evtTools.common.exponentialInterpolation;a.addLayoutValueTween=(e,t,n,r,s,o,i)=>{a.getTweensMap(e).addSimpleTween(t,e,o,s,i?b:m,n,r,x,{type:"layoutValue"})},a.addLayerValueTween=(e,t,n,r,s,o,i,l)=>{const g=e.getLayer(l);a.getTweensMap(e).addSimpleTween(t,g,o,s,i?b:m,n,r,S,{type:"layerValue",layerName:l})},a.tweenVariableNumber=(e,t,n,r,s,o,i)=>{a.getTweensMap(e).addSimpleTween(t,e,o/1e3,i,m,r,s,p(n),{type:"variable",variable:n})},a.tweenVariableNumber2=(e,t,n,r,s,o)=>{a.tweenVariableNumber3(e,t,n,r,o,s/1e3)},a.tweenVariableNumber3=(e,t,n,r,s,o)=>{n.getType()==="number"&&a.getTweensMap(e).addSimpleTween(t,e,o,s,m,n.getValue(),r,p(n),{type:"variable",variable:n})},a.tweenCamera=(e,t,n,r,s,o,i)=>{V(e,t,n,r,s,o/1e3,i,e)},a.tweenCamera2=(e,t,n,r,s,o,i)=>{const l=e.getLayer(s);V(e,t,n,r,s,i,o,l)};const V=(e,t,n,r,s,o,i,l)=>{const g=e.getLayer(s);a.getTweensMap(e).addMultiTween(t,l,o,i,m,[g.getCameraX(),g.getCameraY()],[n,r],w(g),{type:"cameraPosition",layerName:s})};a.tweenCameraZoom=(e,t,n,r,s,o)=>{h(e,t,n,r,s/1e3,o,e,m)},a.tweenCameraZoom2=(e,t,n,r,s,o)=>{const i=e.getLayer(r);h(e,t,n,r,o,s,i,b)};const h=(e,t,n,r,s,o,i,l)=>{const g=e.getLayer(r);a.getTweensMap(e).addSimpleTween(t,i,s,o,l,g.getCameraZoom(),n,L(g),{type:"cameraZoom",layerName:r})};a.tweenCameraRotation=(e,t,n,r,s,o)=>{E(e,t,n,r,s/1e3,o,e)},a.tweenCameraRotation2=(e,t,n,r,s,o)=>{const i=e.getLayer(r);E(e,t,n,r,o,s,i)};const E=(e,t,n,r,s,o,i)=>{const l=e.getLayer(r);a.getTweensMap(e).addSimpleTween(t,i,s,o,m,l.getCameraRotation(),n,C(l),{type:"cameraRotation",layerName:r})};a.tweenNumberEffectPropertyTween=(e,t,n,r,s,o,i,l)=>{const g=e.getLayer(r),f=g.getRendererEffects()[s];f||y.error(`The layer "${g.getName()}" doesn't have any effect called "${s}"`),a.getTweensMap(e).addSimpleTween(t,g,l,i,m,f?f.getDoubleParameter(o):0,n,v(f,o),{type:"numberEffectProperty",layerName:r,effectName:s,propertyName:o})},a.tweenColorEffectPropertyTween=(e,t,n,r,s,o,i,l)=>{const g=e.getLayer(r),f=g.getRendererEffects()[s];f||y.error(`The layer "${g.getName()}" doesn't have any effect called "${s}"`);const T=c.hexNumberToRGB(f?f.getColorParameter(o):0),d=c.rgbOrHexToRGBColor(n);a.getTweensMap(e).addMultiTween(t,g,l,i,m,c.evtTools.tween.rgbToHsl(T.r,T.g,T.b),c.evtTools.tween.rgbToHsl(d[0],d[1],d[2]),P(f,o),{type:"colorEffectProperty",layerName:r,effectName:s,propertyName:o})}})(M=R.tween||(R.tween={}))})(F=c.evtTools||(c.evtTools={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=tweentools.js.map
